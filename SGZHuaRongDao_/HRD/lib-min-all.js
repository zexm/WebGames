//color plugin
(function(jQuery){jQuery.each(['backgroundColor','borderBottomColor','borderLeftColor','borderRightColor','borderTopColor','color','outlineColor'],function(i,attr){jQuery.fx.step[attr]=function(fx){if(fx.state==0){fx.start=getColor(fx.elem,attr);fx.end=getRGB(fx.end);} fx.elem.style[attr]="rgb("+[Math.max(Math.min(parseInt((fx.pos*(fx.end[0]-fx.start[0]))+fx.start[0]),255),0),Math.max(Math.min(parseInt((fx.pos*(fx.end[1]-fx.start[1]))+fx.start[1]),255),0),Math.max(Math.min(parseInt((fx.pos*(fx.end[2]-fx.start[2]))+fx.start[2]),255),0)].join(",")+")";}});function getRGB(color){var result;if(color&&color.constructor==Array&&color.length==3) return color;if(result=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color)) return[parseInt(result[1]),parseInt(result[2]),parseInt(result[3])];if(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color)) return[parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,parseFloat(result[3])*2.55];if(result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color)) return[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)];if(result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color)) return[parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16)];return colors[jQuery.trim(color).toLowerCase()];} function getColor(elem,attr){var color;do{color=jQuery.curCSS(elem,attr);if(color!=''&&color!='transparent'||jQuery.nodeName(elem,"body")) break;attr="backgroundColor";}while(elem=elem.parentNode);return getRGB(color);};var colors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};})(jQuery);
//hotkey plugin
(function(a){function b(b){if(typeof b.data!=="string"){return}var c=b.handler,d=b.data.toLowerCase().split(" ");b.handler=function(b){if(this!==b.target&&(/textarea|select/i.test(b.target.nodeName)||b.target.type==="text")){return}var e=b.type!=="keypress"&&a.hotkeys.specialKeys[b.which],f=String.fromCharCode(b.which).toLowerCase(),g,h="",i={};if(b.altKey&&e!=="alt"){h+="alt+"}if(b.ctrlKey&&e!=="ctrl"){h+="ctrl+"}if(b.metaKey&&!b.ctrlKey&&e!=="meta"){h+="meta+"}if(b.shiftKey&&e!=="shift"){h+="shift+"}if(e){i[h+e]=true}else{i[h+f]=true;i[h+a.hotkeys.shiftNums[f]]=true;if(h==="shift+"){i[a.hotkeys.shiftNums[f]]=true}}for(var j=0,k=d.length;j<k;j++){if(i[d[j]]){return c.apply(this,arguments)}}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})})(jQuery);
//base.min.js
function insertAtCursor(obj,txt){obj.focus();if(document.selection){sel=document.selection.createRange();sel.text=txt;}else{var startPos=obj.selectionStart;var scrollTop=obj.scrollTop;var endPos=obj.selectionEnd;obj.value=obj.value.substring(0,startPos)+txt+obj.value.substring(endPos,obj.value.length);startPos+=txt.length;obj.setSelectionRange(startPos,startPos);obj.scrollTop=scrollTop;}}
function check_limit(field,limit){if(field.value.length>limit){alert("老大，整太多了吧，最多输入 "+limit+" 个字符！");var revertField=field.value.slice(0,limit-10);field.value=revertField;field.focus();}}
function set_cookie(key,value,exp,path,domain,secure){var cookie_string=key+"="+escape(value);if(exp)cookie_string+="; expires="+exp.toGMTString();if(!path)path="/";cookie_string+="; path="+escape(path);if(domain)cookie_string+="; domain="+escape(domain);if(secure)cookie_string+="; secure";document.cookie=cookie_string;}
function get_cookie(cookie_name){var results=document.cookie.match('(^|;) ?'+cookie_name+'=([^;]*)(;|$)');if(results)return(unescape(results[2]));else return null;}
function delete_cookie(cookie_name){var cookie_date=new Date();cookie_date.setTime(cookie_date.getTime()-1);document.cookie=cookie_name+="=; expires="+cookie_date.toGMTString();}
function bookmark(title,url){if(document.all) window.external.AddFavorite(url,title);else if(window.sidebar) window.sidebar.addPanel(title,url,"");}
Array.prototype.clone=function(){var c=[];var old=this;for(var i=0;i<old.length;i++){var o=old[i];c[i]=o.clone?o.clone():o;}return c;};String.prototype.escapeHTML=function(){return this.replace(/&/g,'&amp;').replace(/>/g,'&gt;').replace(/</g,'&lt;').replace(/"/g,'&quot;');};function set_page_info(){var url=window.location.toString();result=url.match(/[\?\&]page=([^\&]+)([\b\&]|$)/);if(result)id="p_"+result[1];else id="p_1";obj=document.getElementById(id);if(obj){obj.style.fontWeight="bold";obj.style.color="red";}}
function set_current_links(cls){cls=cls||"current";var url=window.location.href;var rxlinks=/^http:\/\/[^\/]*\/([^\/]+)\/([^\/]*)/;var m=url.match(rxlinks);if(m){$("#sl_"+m[1]).addClass(cls);$("#pl_"+m[2]).addClass(cls);}else{$("#sl_").addClass(cls);$("#pl_").addClass(cls);}}
$(set_current_links);$(function(){var addrs={'delicious':['http://delicious.com/post?v=4','url','title'],'baidu':['http://cang.baidu.com/do/add?tn=','iu','it'],'qq':['http://shuqian.qq.com/post?from=3&','uri','title'],'qqweibo':['http://share.v.t.qq.com/index.php?c=share&a=index','url','title'],'google':['http://www.google.com/bookmarks/mark?op=add','bkmk','title'],'facebook':['http://www.facebook.com/sharer.php?','u','t'],'weibo':['http://v.t.sina.com.cn/share/share.php?','url','title'],'douban':['http://www.douban.com/recommend/?sel=&v=1','url','title'],'renren':['http://widget.renren.com/dialog/share?','url','title'],'yahoo':['http://myweb.cn.yahoo.com/popadd.html?','url','title'],'leshou':['http://leshou.com/post?act=posturl&reuser=&intro=&tags=&tool=0','url','title'],'digg':['http://digg.com/submit?phase=2','url','title']};$("#mysharesome li").hover(function(){$(this).css("backgroundColor","#dddddd");},function(){$(this).css("backgroundColor","");});$("#mysharesome li").click(function(){var cn=$(this).attr("class").substring(3);if(addrs[cn]){var addr=addrs[cn];window.location.href=addr[0]+"&"+addr[1]+"="+encodeURIComponent(window.location.href)+"&"+addr[2]+"="+encodeURIComponent(document.title);}else if(cn=="twitter"){window.location.href="http://twitter.com/home?status="+encodeURIComponent(window.location.href+" "+document.title);}else if(cn=="favorites"){bookmark(document.title,window.location.href);}else{alert("这个选项没见过，报告一下管理员吧...");}});});
