<!DOCTYPE html>
<html>
	<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
		<title>mobile test</title>
		<style>
			body{
				width: 100%;
				height: 100%;
				margin:0;
				padding:0;
				background-color: bisque;
			}
			#myContainer{
				position: relative;
				width:100%;
				height: 430px;
				background-color: green;
			}
			/*#myContainer:active{
				background-color: yellow;
			}*/
			#myTextresult{
				position: relative;
				width:100px;
				height: 60px;
				padding: 50px;
				background-color: grey;
			}
		</style>
		<script type="text/javascript">
		
		</script>
	</head>
	<body>
		<div id="myContainer">
			<div id="myTextresult"></div>
		</div>
	</body>
	<script type="text/javascript">
			var iContainer = document.getElementById("myContainer");
			var iTextresult = document.getElementById("myTextresult");
			iTextresult.innerHTML="OO";
			
			var touch, startX, startY;
			
			function iContainerTouchStart(event){
				event.preventDefault();
				touch = event.touches[0];
				startX = touch.pageX;
				startY = touch.pageY;
				iTextresult.innerHTML="startX :" + startX + ", startY : " + startY;
			}
			function iContainerTouchMove(event){
				event.preventDefault();
				touch = event.touches[0];
				var nowX = touch.pageX;
				var nowY = touch.pageY;
				//iTextresult.innerHTML="nowX :" + nowX + ", nowY : " + nowY;
				
				//getDirection(nowX,nowY);
			}
			function iContainerTouchEnd(event){
				event.preventDefault();				
				touch = event.touches[0];
				var endX = touch.pageX;
				var endY = touch.pageY;
				
				getDirection(endX,endY);
			}
			
			
			function iContainerMouseDown(event){
				startX = event.offsetX;
				startY = event.offsetY;
				console.log("startX :" + startX + ", startY : " + startY);
			}
			function iContainerMouseUp(event){
				var endX = event.offsetX;
				var endY = event.offsetY;
				
				console.log("endX :" + endX + ", endY : " + endY);
				
				getDirection(endX,endY);
			}
			
			
			function getDirection(endX,endY){
			
			
				var moveX = endX - startX;
				var moveY = endY - startY;
				
				console.log("moveX :" + moveX + ", moveY : " + moveY);
				
				if(Math.abs(moveY) > Math.abs(moveX)){
					if(moveY>0){
						iTextresult.innerHTML="D";
					}else{
						iTextresult.innerHTML="U";
					}
				}else{
					if(moveX>0){
						iTextresult.innerHTML="R";
					}else{
						iTextresult.innerHTML="L";
					}
				}
				//iTextresult.innerHTML="endX :" + endX + ", endY : " + endY;
			}
			
			if (window.addEventListener){
				console.log("support addEventListener");
			}else if (window.attachEvent){
				console.log("support attachEvent");
			}

			iContainer.addEventListener('touchstart', iContainerTouchStart, false);
			iContainer.addEventListener('touchmove', iContainerTouchMove, false);
			//iContainer.addEventListener('touchend', iContainerTouchEnd, false);
			//iContainer.addEventListener('touchcancel', function(event){ }, false);
			
			//iContainer.addEventListener('mousedown', iContainerMouseDown, false);
			//iContainer.addEventListener('mousemove', iContainerMouseMove, false);
			//iContainer.addEventListener('mouseup', iContainerMouseUp, false);
			
			
		</script>  
</html>
